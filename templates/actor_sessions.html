{% extends "base.html" %}
{% block content %}

<a class="back" href="/actor/{{ actor.actor_id }}">&larr; Back to actor</a>
<div class="page-head">
  <div>
    <h1>Sessions for {{ actor.short }}</h1>
    <div class="sub">Ãšltimas sesiones vistas el {{ actor.last_seen_fmt }}</div>
  </div>
  <div class="kpis">
    <div class="kpi">
      <div class="kpi-label">Total</div>
      <div class="kpi-value">{{ sessions|length }}</div>
    </div>
    <div class="kpi">
      <div class="kpi-label">Eventos</div>
      <div class="kpi-value">{{ debug.event_count }}</div>
    </div>
  </div>
</div>

<div class="card">
  <div class="card-head">
    <div class="card-title">Sessions</div>
    <div class="card-sub">Latest activity first</div>
  </div>
  {% if sessions %}
    <div class="table-wrap">
      <table class="table table-sortable">
        <thead>
          <tr>
            <th data-type="text">ID</th>
            <th data-type="date">Started</th>
            <th data-type="date">Ended</th>
            <th data-type="number">Stage Max</th>
            <th data-type="text">Summary</th>
            <th data-type="text"></th>
          </tr>
        </thead>
        <tbody>
          {% for s in sessions %}
          <tr>
            <td class="mono clip">{{ s.session_id }}</td>
            <td class="mono">{{ s.started_fmt }}</td>
            <td class="mono">{{ s.ended_fmt or '-' }}</td>
            <td><span class="pill">S{{ s.stage_max|default(0) }}</span></td>
            <td>{{ s.summary or '-' }}</td>
            <td><a class="btn btn-outline" href="/dashboard/sessions/{{ s.session_id }}">View</a></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="case-empty" style="margin:14px;">Sin sesiones registradas para este actor.</div>
  {% endif %}
</div>

{% endblock %}
